{
  "swagger": "2.0",
  "info": {
    "version": "1.0.0"
  },
  "basePath": "/rest",
  "tags": [
    {
      "name": "message_list"
    }
  ],
  "paths": {
    "/public/v1/messages": {
      "get": {
        "tags": [
          "message_list"
        ],
        "summary": "Returns the public NW and NM messages",
        "description": "",
        "operationId": "search",
        "produces": [
          "application/json;charset=UTF-8",
          "application/xml;charset=UTF-8"
        ],
        "parameters": [
          {
            "name": "lang",
            "in": "query",
            "description": "Two-letter ISO 639-1 language code",
            "required": false,
            "type": "string",
            "x-example": "en"
          },
          {
            "name": "domain",
            "in": "query",
            "description": "The ID of the domain to select messages from",
            "required": false,
            "type": "string",
            "x-example": "niord-client-nw"
          },
          {
            "name": "messageSeries",
            "in": "query",
            "description": "Specific message series to select messages from",
            "required": false,
            "type": "array",
            "items": {
              "type": "string"
            },
            "collectionFormat": "multi",
            "x-example": "dma-nw"
          },
          {
            "name": "mainType",
            "in": "query",
            "description": "Either NW (navigational warnings) or NM (notices to mariners)",
            "required": false,
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "NW",
                "NM"
              ]
            },
            "collectionFormat": "multi",
            "x-example": "NW"
          },
          {
            "name": "wkt",
            "in": "query",
            "description": "Well-Known Text for geographical extent",
            "required": false,
            "type": "string",
            "x-example": "POLYGON((7 54, 7 57, 13 56, 13 57, 7 54))"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Message"
              }
            }
          }
        }
      }
    },
    "/public/v1/xsd/{schemaFile}": {
      "get": {
        "tags": [
          "message_list"
        ],
        "summary": "Returns XSD model of the Message class",
        "description": "",
        "operationId": "getMessageXsd",
        "produces": [
          "application/xml;charset=UTF-8"
        ],
        "parameters": [
          {
            "name": "schemaFile",
            "in": "path",
            "description": "The schema file, either schema1.xsd or schema2.xsd",
            "required": true,
            "type": "string",
            "x-example": "schema2.xsd"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "type": "string"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "MultiPoint": {
      "allOf": [
        {
          "$ref": "#/definitions/GeoJson"
        },
        {
          "type": "object",
          "properties": {
            "coordinates": {
              "type": "array",
              "items": {
                "type": "array",
                "items": {
                  "type": "number",
                  "format": "double"
                }
              }
            }
          },
          "description": "GeoJson MultiPoint type",
          "xml": {
            "name": "multiPoint"
          }
        }
      ]
    },
    "MultiLineString": {
      "allOf": [
        {
          "$ref": "#/definitions/GeoJson"
        },
        {
          "type": "object",
          "properties": {
            "coordinates": {
              "type": "array",
              "items": {
                "type": "array",
                "items": {
                  "type": "array",
                  "items": {
                    "type": "number",
                    "format": "double"
                  }
                }
              }
            }
          },
          "description": "GeoJson MultiLineString type",
          "xml": {
            "name": "multiLineString"
          }
        }
      ]
    },
    "MessageSeries": {
      "type": "object",
      "properties": {
        "seriesId": {
          "type": "string"
        },
        "mainType": {
          "type": "string",
          "enum": [
            "NW",
            "NM"
          ]
        }
      },
      "description": "A message series",
      "xml": {
        "name": "messageSeries"
      }
    },
    "AttachmentDesc": {
      "type": "object",
      "properties": {
        "lang": {
          "type": "string",
          "xml": {
            "attribute": true
          }
        },
        "caption": {
          "type": "string"
        }
      },
      "description": "Translatable fields of the Attachment model"
    },
    "Category": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int32",
          "xml": {
            "attribute": true
          }
        },
        "mrn": {
          "type": "string"
        },
        "active": {
          "type": "boolean",
          "default": false
        },
        "parent": {
          "$ref": "#/definitions/Category"
        },
        "descs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/CategoryDesc"
          }
        }
      },
      "description": "Hierarchical category model",
      "xml": {
        "name": "category"
      }
    },
    "Message": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "xml": {
            "attribute": true
          }
        },
        "created": {
          "type": "string",
          "format": "date-time",
          "xml": {
            "attribute": true
          }
        },
        "updated": {
          "type": "string",
          "format": "date-time",
          "xml": {
            "attribute": true
          }
        },
        "messageSeries": {
          "$ref": "#/definitions/MessageSeries"
        },
        "number": {
          "type": "integer",
          "format": "int32"
        },
        "shortId": {
          "type": "string"
        },
        "mainType": {
          "type": "string",
          "enum": [
            "NW",
            "NM"
          ]
        },
        "type": {
          "type": "string",
          "enum": [
            "PERMANENT_NOTICE",
            "TEMPORARY_NOTICE",
            "PRELIMINARY_NOTICE",
            "MISCELLANEOUS_NOTICE",
            "COASTAL_WARNING",
            "SUBAREA_WARNING",
            "NAVAREA_WARNING",
            "LOCAL_WARNING"
          ]
        },
        "status": {
          "type": "string",
          "enum": [
            "DRAFT",
            "VERIFIED",
            "PUBLISHED",
            "EXPIRED",
            "CANCELLED",
            "DELETED"
          ]
        },
        "areas": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Area"
          }
        },
        "categories": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Category"
          }
        },
        "charts": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Chart"
          }
        },
        "horizontalDatum": {
          "type": "string"
        },
        "publishDateFrom": {
          "type": "string",
          "format": "date-time"
        },
        "publishDateTo": {
          "type": "string",
          "format": "date-time"
        },
        "references": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Reference"
          }
        },
        "originalInformation": {
          "type": "boolean",
          "default": false
        },
        "parts": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/MessagePart"
          }
        },
        "descs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/MessageDesc"
          }
        },
        "attachments": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Attachment"
          }
        }
      },
      "description": "Main NW and NM message class",
      "xml": {
        "name": "message"
      }
    },
    "Crs": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "properties": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        }
      },
      "description": "GeoJson Coordinate Reference System"
    },
    "Attachment": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "path": {
          "type": "string"
        },
        "fileName": {
          "type": "string"
        },
        "fileSize": {
          "type": "integer",
          "format": "int64"
        },
        "display": {
          "type": "string",
          "enum": [
            "ABOVE",
            "BELOW",
            "SEPARATE_PAGE"
          ]
        },
        "width": {
          "type": "string"
        },
        "height": {
          "type": "string"
        },
        "descs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/AttachmentDesc"
          }
        }
      },
      "description": "Message attachment model",
      "xml": {
        "name": "attachment"
      }
    },
    "FeatureCollectionVo": {
      "allOf": [
        {
          "$ref": "#/definitions/FeatureCollection"
        },
        {
          "type": "object",
          "properties": {},
          "description": "GeoJson FeatureCollection type",
          "xml": {
            "name": "featureCollection"
          }
        }
      ]
    },
    "GeoJson": {
      "type": "object",
      "discriminator": "type",
      "properties": {
        "type": {
          "type": "string"
        },
        "crs": {
          "$ref": "#/definitions/Crs"
        },
        "bbox": {
          "type": "array",
          "items": {
            "type": "number",
            "format": "double"
          }
        }
      },
      "description": "Superclass for GeoJson types"
    },
    "DateInterval": {
      "type": "object",
      "properties": {
        "allDay": {
          "type": "boolean",
          "default": false
        },
        "fromDate": {
          "type": "string",
          "format": "date-time"
        },
        "toDate": {
          "type": "string",
          "format": "date-time"
        }
      },
      "description": "Date interval"
    },
    "Feature": {
      "type": "object",
      "discriminator": "type",
      "properties": {
        "type": {
          "type": "string"
        },
        "crs": {
          "$ref": "#/definitions/Crs"
        },
        "bbox": {
          "type": "array",
          "items": {
            "type": "number",
            "format": "double"
          }
        },
        "id": {
          "type": "object"
        },
        "geometry": {
          "$ref": "#/definitions/GeoJson"
        },
        "properties": {
          "type": "object",
          "additionalProperties": {
            "type": "object"
          }
        }
      },
      "description": "GeoJson Feature type",
      "xml": {
        "name": "feature"
      }
    },
    "FeatureVo": {
      "allOf": [
        {
          "$ref": "#/definitions/Feature"
        },
        {
          "type": "object",
          "properties": {},
          "description": "GeoJson Feature type",
          "xml": {
            "name": "feature"
          }
        }
      ]
    },
    "MessageDesc": {
      "type": "object",
      "properties": {
        "lang": {
          "type": "string",
          "xml": {
            "attribute": true
          }
        },
        "title": {
          "type": "string"
        },
        "vicinity": {
          "type": "string"
        },
        "publication": {
          "type": "string"
        },
        "source": {
          "type": "string"
        }
      },
      "description": "Translatable fields of the Message model"
    },
    "GeometryCollection": {
      "allOf": [
        {
          "$ref": "#/definitions/GeoJson"
        },
        {
          "type": "object",
          "properties": {
            "geometries": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/GeoJson"
              }
            }
          },
          "description": "GeoJson GeometryCollection type",
          "xml": {
            "name": "geometryCollection"
          }
        }
      ]
    },
    "ReferenceDesc": {
      "type": "object",
      "properties": {
        "lang": {
          "type": "string",
          "xml": {
            "attribute": true
          }
        },
        "description": {
          "type": "string"
        }
      },
      "description": "Translatable fields of the Reference model"
    },
    "Polygon": {
      "allOf": [
        {
          "$ref": "#/definitions/GeoJson"
        },
        {
          "type": "object",
          "properties": {
            "coordinates": {
              "type": "array",
              "items": {
                "type": "array",
                "items": {
                  "type": "array",
                  "items": {
                    "type": "number",
                    "format": "double"
                  }
                }
              }
            }
          },
          "description": "GeoJson Polygon type",
          "xml": {
            "name": "polygon"
          }
        }
      ]
    },
    "AreaDesc": {
      "type": "object",
      "properties": {
        "lang": {
          "type": "string",
          "xml": {
            "attribute": true
          }
        },
        "name": {
          "type": "string"
        }
      },
      "description": "Translatable fields of the Area model"
    },
    "Chart": {
      "type": "object",
      "properties": {
        "chartNumber": {
          "type": "string"
        },
        "internationalNumber": {
          "type": "integer",
          "format": "int32"
        },
        "active": {
          "type": "boolean",
          "default": false
        },
        "scale": {
          "type": "integer",
          "format": "int32"
        },
        "name": {
          "type": "string"
        }
      },
      "description": "Sea chart model",
      "xml": {
        "name": "chart"
      }
    },
    "CategoryDesc": {
      "type": "object",
      "properties": {
        "lang": {
          "type": "string",
          "xml": {
            "attribute": true
          }
        },
        "name": {
          "type": "string"
        }
      },
      "description": "Translatable fields of the Category model"
    },
    "Reference": {
      "type": "object",
      "properties": {
        "messageId": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": [
            "REFERENCE",
            "REPETITION",
            "CANCELLATION",
            "UPDATE"
          ]
        },
        "descs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ReferenceDesc"
          }
        }
      },
      "description": "A message reference"
    },
    "MessagePart": {
      "type": "object",
      "properties": {
        "indexNo": {
          "type": "integer",
          "format": "int32"
        },
        "type": {
          "type": "string",
          "enum": [
            "DETAILS",
            "TIME",
            "NOTE",
            "PROHIBITION",
            "SIGNALS"
          ]
        },
        "eventDates": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/DateInterval"
          }
        },
        "geometry": {
          "$ref": "#/definitions/FeatureCollection"
        },
        "descs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/MessagePartDesc"
          }
        }
      },
      "description": "Main NW and NM message part class"
    },
    "MessagePartDesc": {
      "type": "object",
      "properties": {
        "lang": {
          "type": "string",
          "xml": {
            "attribute": true
          }
        },
        "subject": {
          "type": "string"
        },
        "details": {
          "type": "string"
        }
      },
      "description": "Translatable fields of the MessagePart model"
    },
    "Point": {
      "allOf": [
        {
          "$ref": "#/definitions/GeoJson"
        },
        {
          "type": "object",
          "properties": {
            "coordinates": {
              "type": "array",
              "items": {
                "type": "number",
                "format": "double"
              }
            }
          },
          "description": "GeoJson Point type",
          "xml": {
            "name": "point"
          }
        }
      ]
    },
    "Area": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int32",
          "xml": {
            "attribute": true
          }
        },
        "mrn": {
          "type": "string"
        },
        "active": {
          "type": "boolean",
          "default": false
        },
        "parent": {
          "$ref": "#/definitions/Area"
        },
        "descs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/AreaDesc"
          }
        }
      },
      "description": "Hierarchical area model",
      "xml": {
        "name": "area"
      }
    },
    "FeatureCollection": {
      "type": "object",
      "discriminator": "type",
      "properties": {
        "type": {
          "type": "string"
        },
        "crs": {
          "$ref": "#/definitions/Crs"
        },
        "bbox": {
          "type": "array",
          "items": {
            "type": "number",
            "format": "double"
          }
        },
        "id": {
          "type": "object"
        },
        "features": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Feature"
          }
        }
      },
      "description": "GeoJson FeatureCollection type",
      "xml": {
        "name": "featureCollection"
      }
    },
    "LineString": {
      "allOf": [
        {
          "$ref": "#/definitions/GeoJson"
        },
        {
          "type": "object",
          "properties": {
            "coordinates": {
              "type": "array",
              "items": {
                "type": "array",
                "items": {
                  "type": "number",
                  "format": "double"
                }
              }
            }
          },
          "description": "GeoJson LineString type",
          "xml": {
            "name": "lineString"
          }
        }
      ]
    },
    "MultiPolygon": {
      "allOf": [
        {
          "$ref": "#/definitions/GeoJson"
        },
        {
          "type": "object",
          "properties": {
            "coordinates": {
              "type": "array",
              "items": {
                "type": "array",
                "items": {
                  "type": "array",
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "number",
                      "format": "double"
                    }
                  }
                }
              }
            }
          },
          "description": "GeoJson MultiPolygon type",
          "xml": {
            "name": "multiPolygon"
          }
        }
      ]
    }
  }
}
